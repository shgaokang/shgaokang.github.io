<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="js," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="最快的方式是调试似是而非的代码 / javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript:The Definitive Guide,6th Edition">
<meta property="og:url" content="https://gaokang.github.io/2017/01/27/5/index.html">
<meta property="og:site_name" content="{codes}">
<meta property="og:description" content="最快的方式是调试似是而非的代码 / javascript">
<meta property="og:image" content="https://gaokang.github.io/images/5.jpg">
<meta property="og:updated_time" content="2017-01-27T14:35:18.447Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript:The Definitive Guide,6th Edition">
<meta name="twitter:description" content="最快的方式是调试似是而非的代码 / javascript">
<meta name="twitter:image" content="https://gaokang.github.io/images/5.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> JavaScript:The Definitive Guide,6th Edition | {codes} </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">{codes}</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-designpatterns">
          <a href="/categories/Design-Patterns" rel="section">
            
            Design Patterns
          </a>
        </li>
      
        
        <li class="menu-item menu-item-solutions">
          <a href="/categories/Solutions" rel="section">
            
            Solutions
          </a>
        </li>
      
        
        <li class="menu-item menu-item-operations">
          <a href="/categories/Operations" rel="section">
            
            Operations
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                JavaScript:The Definitive Guide,6th Edition
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-01-27T16:22:35+08:00" content="2017-01-27">
              2017-01-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Booklist/" itemprop="url" rel="index">
                    <span itemprop="name">Booklist</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>最快的方式是调试似是而非的代码 / javascript<br><a id="more"></a><br><img src="/images/5.jpg" alt=""><br><a href="https://book.douban.com/subject/5303032/" target="_blank" rel="external">JavaScript:The Definitive Guide,6th Edition</a></p>
<blockquote>
<p>补充1</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">	<span class="keyword">var</span> b=a;</div><div class="line">	a=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">	<span class="built_in">console</span>.log(b);</div><div class="line">	<span class="comment">//[1,2,3]</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">	<span class="keyword">var</span> b=a;</div><div class="line">	a.pop();</div><div class="line">	<span class="built_in">console</span>.log(b);</div><div class="line">	<span class="comment">//[1,2]</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>补充2 this  </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">sayLocation</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.atWhere)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> atWhere = <span class="string">"I am in global"</span>;</div><div class="line">	sayLocation();</div><div class="line">	<span class="comment">//I am in global</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="string">'use strict'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">sayLocation</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.atWhere);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> atWhere = <span class="string">"I am in global"</span>;</div><div class="line">	sayLocation();</div><div class="line">	<span class="comment">// Uncaught TypeError</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"global"</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); </div><div class="line">	    <span class="comment">//"global"</span></div><div class="line">	    person.name = <span class="string">'inside'</span>;</div><div class="line">	    <span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">	        <span class="comment">//"global"</span></div><div class="line">	    &#125;</div><div class="line">	    sayName();</div><div class="line">	&#125;</div><div class="line">	person();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"1"</span>,</div><div class="line">    <span class="attr">say</span>: say</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"2"</span>,</div><div class="line">    <span class="attr">say</span>: say</div><div class="line">&#125;</div><div class="line">obj1.say();</div><div class="line"><span class="comment">//1</span></div><div class="line">obj2.say();</div><div class="line"><span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"global"</span>;</div><div class="line">	<span class="keyword">var</span> obj = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">"inside"</span>,</div><div class="line">	    <span class="attr">say</span>: say</div><div class="line">	&#125;</div><div class="line">	obj.say();</div><div class="line">	<span class="comment">//inside</span></div><div class="line">	<span class="keyword">var</span> alias = obj.say;</div><div class="line">	alias();</div><div class="line">	<span class="comment">//global</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"global"</span>;</div><div class="line">	<span class="keyword">var</span> obj1 = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">'obj1'</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj2 = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">'obj2'</span></div><div class="line">	&#125;</div><div class="line">	speak();</div><div class="line">	<span class="comment">//global</span></div><div class="line">	speak.call(<span class="built_in">window</span>);</div><div class="line">	<span class="comment">//global</span></div><div class="line">	speak.call(obj1);</div><div class="line">	<span class="comment">//obj1</span></div><div class="line">	speak.call(obj2);</div><div class="line">	<span class="comment">//obj2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">x,y</span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a*x+y);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj1 = &#123;</div><div class="line">	    <span class="attr">a</span>: <span class="number">2</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj2 = &#123;</div><div class="line">	    <span class="attr">a</span>: <span class="number">3</span></div><div class="line">	&#125;</div><div class="line">	count.call(obj1, <span class="number">1</span>, <span class="number">2</span>) </div><div class="line">	<span class="comment">//4</span></div><div class="line">	count.apply(obj1, [<span class="number">1</span>, <span class="number">2</span>]) </div><div class="line">	<span class="comment">//4</span></div><div class="line">	count.call(obj2, <span class="number">1</span>, <span class="number">2</span>) </div><div class="line">	<span class="comment">//5</span></div><div class="line">	count.apply(obj2, [<span class="number">1</span>, <span class="number">2</span>]) </div><div class="line">	<span class="comment">//5</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">x,y</span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a*x+y);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj1 = &#123;</div><div class="line">	    <span class="attr">a</span>:<span class="number">2</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> bound1 = count.bind(obj1);</div><div class="line">	bound1(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">	<span class="keyword">var</span> bound2 = count.bind(obj1, <span class="number">1</span>);</div><div class="line">	bound2(<span class="number">2</span>);</div><div class="line">	<span class="keyword">var</span> bound3 = count.bind(obj1, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">	bound3();</div><div class="line">	<span class="keyword">var</span> bound4 = count.bind(obj1, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">	<span class="comment">//指定了多余的参数,多余的参数会被忽略</span></div><div class="line">	bound4();</div><div class="line">	<span class="comment">//4</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.name = name;</div><div class="line">	    <span class="keyword">this</span>.age = age;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="string">"f"</span>);</div><div class="line">	&#125;</div><div class="line">	Person(<span class="string">"n"</span>,<span class="number">0</span>);</div><div class="line">	<span class="comment">//f</span></div><div class="line">	<span class="built_in">console</span>.log(name);</div><div class="line">	<span class="comment">//n</span></div><div class="line">	<span class="built_in">console</span>.log(age);</div><div class="line">	<span class="comment">//0</span></div><div class="line">	<span class="keyword">var</span> n=<span class="keyword">new</span> Person(<span class="string">"n"</span>,<span class="number">0</span>);</div><div class="line">	<span class="comment">//f</span></div><div class="line">	<span class="built_in">console</span>.log(n.name);</div><div class="line">	<span class="comment">//n</span></div><div class="line">	<span class="built_in">console</span>.log(n.age);</div><div class="line">	<span class="comment">//0</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj1 = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">'obj1'</span>,</div><div class="line">	    <span class="attr">speak</span>: speak</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj2 = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">'obj2'</span></div><div class="line">	&#125;</div><div class="line">	obj1.speak();</div><div class="line">	<span class="comment">//obj1</span></div><div class="line">	obj1.speak.call(obj2);</div><div class="line">	<span class="comment">//obj2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.a = something;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj1 = &#123;&#125;;</div><div class="line">	<span class="keyword">var</span> bar = foo.bind(obj1);  </div><div class="line">	<span class="comment">//返回一个新函数bar，这个新函数内的this指向了obj1</span></div><div class="line">	bar(<span class="number">2</span>); </div><div class="line">	<span class="built_in">console</span>.log(obj1.a);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="keyword">var</span> baz = <span class="keyword">new</span> bar(<span class="number">3</span>)</div><div class="line">	<span class="comment">//调用new 操作符后，bar函数的this指向了返回的新实例baz</span></div><div class="line">	<span class="built_in">console</span>.log(obj1.a);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(baz.a);</div><div class="line">	<span class="comment">//3 </span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line">	<span class="keyword">var</span> foo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> obj = &#123;</div><div class="line">	    <span class="attr">a</span>: <span class="number">2</span></div><div class="line">	&#125;</div><div class="line">	foo();</div><div class="line">	<span class="comment">//1</span></div><div class="line">	foo.call(obj);</div><div class="line">	<span class="comment">//1</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.name = name</div><div class="line">	    <span class="keyword">this</span>.age = age </div><div class="line">	    <span class="keyword">this</span>.speak = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">	        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">	        <span class="comment">//普通函数</span></div><div class="line">	    &#125;</div><div class="line">	    <span class="keyword">this</span>.bornYear = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	        <span class="comment">//箭头函数</span></div><div class="line">	        <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="keyword">this</span>.age)</div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> n = <span class="keyword">new</span> Person(<span class="string">"n"</span>,<span class="number">10</span>)</div><div class="line">	n.speak() </div><div class="line">	<span class="comment">//'n'</span></div><div class="line">	n.bornYear() </div><div class="line">	<span class="comment">//2007</span></div><div class="line">	<span class="keyword">var</span> m = &#123;</div><div class="line">	    <span class="attr">name</span>: <span class="string">"m"</span>,</div><div class="line">	    <span class="attr">age</span>: <span class="number">100</span></div><div class="line">	&#125;</div><div class="line">	n.speak.call(m)</div><div class="line">	<span class="comment">//'m'</span></div><div class="line">	n.bornYear.call(m)</div><div class="line">	<span class="comment">//2007</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>补充3：apply</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.name=name; </div><div class="line">        <span class="keyword">this</span>.age=age;  </div><div class="line">        <span class="keyword">this</span>.sayhello=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">"hello"</span>)&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Print</span>(<span class="params"></span>)</span>&#123;          </div><div class="line">        <span class="keyword">this</span>.funcName=<span class="string">"Print"</span>; </div><div class="line">        <span class="keyword">this</span>.show=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;      </div><div class="line">            <span class="keyword">var</span> msg=[];</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> <span class="keyword">this</span>)&#123; </div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span>(<span class="keyword">this</span>[key])!=<span class="string">"function"</span>)&#123;</div><div class="line">                    msg.push([key,<span class="string">":"</span>,<span class="keyword">this</span>[key]].join(<span class="string">""</span>));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">console</span>.log(msg.join(<span class="string">" "</span>));</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,age,grade,school</span>)</span>&#123;    </div><div class="line">        Person.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</div><div class="line">        Print.apply(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">this</span>.grade=grade;                </div><div class="line">        <span class="keyword">this</span>.school=school;           </div><div class="line">    &#125; </div><div class="line">    <span class="keyword">var</span> p1=<span class="keyword">new</span> Person(<span class="string">"jake"</span>,<span class="number">10</span>);</div><div class="line">    p1.sayhello();</div><div class="line">    <span class="keyword">var</span> s1=<span class="keyword">new</span> Student(<span class="string">"tom"</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="string">"清华小学"</span>);</div><div class="line">    s1.show();</div><div class="line">    s1.sayhello();</div><div class="line">    <span class="built_in">console</span>.log(s1.funcName);</div><div class="line">    <span class="comment">//hello</span></div><div class="line">    <span class="comment">//name:tom age:13 funcName:Print grade:6 school:清华小学</span></div><div class="line">    <span class="comment">//hello</span></div><div class="line">    <span class="comment">//Print</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getMax</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> arrLen=arr.length;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,ret=arr[<span class="number">0</span>];i&lt;arrLen;i++)&#123;</div><div class="line">            ret=<span class="built_in">Math</span>.max(ret,arr[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getMax2</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">    <span class="built_in">console</span>.log(getMax(a));</div><div class="line">    <span class="built_in">console</span>.log(getMax2(a));</div><div class="line">    <span class="comment">//3</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> arr1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">    <span class="keyword">var</span> arr2=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"></div><div class="line">    <span class="built_in">Array</span>.prototype.push.apply(arr1,arr2);</div><div class="line">    <span class="built_in">console</span>.log(arr1);</div><div class="line">    <span class="comment">//[1,2,3,4,5,6]</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>《javascript权威教程》</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p37</span></div><div class="line"><span class="comment">//二进制浮点数</span></div><div class="line"><span class="keyword">var</span> x=<span class="number">.3</span><span class="number">-.2</span>;</div><div class="line"><span class="keyword">var</span> y=<span class="number">.2</span><span class="number">-.1</span>;</div><div class="line"><span class="built_in">console</span>.log(x==y);</div><div class="line"><span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(x==<span class="number">.1</span>);</div><div class="line"><span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(y==<span class="number">.1</span>);</div><div class="line"><span class="comment">//true</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p38</span></div><div class="line"><span class="comment">//日期</span></div><div class="line"><span class="keyword">var</span> then=<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>,<span class="number">0</span>,<span class="number">8</span>);</div><div class="line"><span class="comment">//2017 1 14 周日</span></div><div class="line"><span class="built_in">console</span>.log(then.getMonth());</div><div class="line"><span class="comment">//0</span></div><div class="line"><span class="built_in">console</span>.log(then.getDate());</div><div class="line"><span class="comment">//8</span></div><div class="line"><span class="built_in">console</span>.log(then.getDay());</div><div class="line"><span class="comment">//0</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p40</span></div><div class="line"><span class="comment">//转义</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'you\'re right'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p43</span></div><div class="line"><span class="comment">//object true</span></div><div class="line"><span class="keyword">if</span>(<span class="number">0</span>!==<span class="literal">null</span>)&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'excute'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//excute</span></div><div class="line"><span class="keyword">var</span> o=&#123;&#125;;</div><div class="line"><span class="keyword">if</span>(o)&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'excute'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//excute</span></div><div class="line"><span class="keyword">var</span> o;</div><div class="line"><span class="keyword">if</span>(o)&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'excute'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//no excute</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p57</span></div><div class="line"><span class="comment">//全局变量</span></div><div class="line"><span class="keyword">var</span> global=<span class="keyword">this</span>;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p58</span></div><div class="line"><span class="comment">//包装对象</span></div><div class="line"><span class="keyword">var</span> s=<span class="string">"s"</span>;</div><div class="line">s.property=<span class="string">'property'</span>;</div><div class="line">alert(s.property);</div><div class="line"><span class="comment">//undefind</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//显式创建包装对象</span></div><div class="line"><span class="keyword">var</span> s=<span class="string">'string'</span>;</div><div class="line"><span class="keyword">var</span> S=<span class="keyword">new</span> <span class="built_in">String</span>(s);</div><div class="line"><span class="built_in">console</span>.log(S.length);</div><div class="line">S.length=<span class="number">100</span>;</div><div class="line"><span class="built_in">console</span>.log(S.length);</div><div class="line">S.wtf=<span class="string">"sonof"</span>;</div><div class="line"><span class="built_in">console</span>.log(S.wtf);</div><div class="line"><span class="comment">//6</span></div><div class="line"><span class="comment">//6</span></div><div class="line"><span class="comment">//sonof</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p59</span></div><div class="line"><span class="keyword">var</span> s=<span class="string">'hello'</span>;</div><div class="line">s.toUpperCase();</div><div class="line"><span class="built_in">console</span>.log(s.toUpperCase());</div><div class="line"><span class="comment">//HELLO</span></div><div class="line"><span class="built_in">console</span>.log(s);</div><div class="line"><span class="comment">//hello</span></div><div class="line">s=s.toUpperCase();</div><div class="line"><span class="built_in">console</span>.log(s);</div><div class="line"><span class="comment">//HELLO</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//p60</span></div><div class="line"><span class="comment">//数组、对象永不相等</span></div><div class="line"><span class="keyword">var</span> o1=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> o2=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line"><span class="built_in">console</span>.log(o1==o2);</div><div class="line"><span class="comment">//false</span></div><div class="line"><span class="keyword">var</span> arr1=[<span class="number">1</span>,<span class="number">2</span>];</div><div class="line"><span class="keyword">var</span> arr2=[<span class="number">1</span>,<span class="number">2</span>];</div><div class="line"><span class="built_in">console</span>.log(arr1==arr2);</div><div class="line"><span class="comment">//false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//对象值都是引用</span></div><div class="line">	<span class="keyword">var</span> a=[];</div><div class="line">	<span class="keyword">var</span> b=a;</div><div class="line">	b[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(a[<span class="number">0</span>]);</div><div class="line">	<span class="comment">//1</span></div><div class="line">	<span class="built_in">console</span>.log(b===a);</div><div class="line">	<span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//类型转换</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">10</span>+<span class="string">'object'</span>);</div><div class="line">	<span class="comment">//string '10object'</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'7'</span>*<span class="string">'4'</span>);</div><div class="line">	<span class="comment">//numeric 28</span></div><div class="line">	<span class="built_in">console</span>.log(n=<span class="number">1</span>-<span class="string">'x'</span>);</div><div class="line">	<span class="comment">//NaN</span></div><div class="line">	<span class="built_in">console</span>.log(n+<span class="string">'object'</span>);</div><div class="line">	<span class="comment">//string NaNobject</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p62</span></div><div class="line">  	<span class="comment">//转换和相等性</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="literal">null</span>==<span class="literal">undefined</span>);</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'0'</span>==<span class="number">0</span>);</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">0</span>==<span class="literal">false</span>);</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'0'</span>==<span class="literal">false</span>);</div><div class="line">	<span class="comment">//all true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  	<span class="comment">//显式转换</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="number">3</span>));</div><div class="line">	<span class="comment">//3</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">String</span>(<span class="literal">false</span>));</div><div class="line">	<span class="comment">//'false'</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Boolean</span>([]));</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Object</span>(<span class="number">3</span>));</div><div class="line">	<span class="comment">//=&gt;new Number(3);</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p67</span></div><div class="line">  	<span class="keyword">var</span> now=<span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">	<span class="built_in">console</span>.log(now+<span class="number">1</span>);</div><div class="line">	<span class="comment">//string</span></div><div class="line">	<span class="built_in">console</span>.log(now<span class="number">-1</span>);</div><div class="line">	<span class="comment">//number</span></div><div class="line">	<span class="built_in">console</span>.log(now==now.toString());</div><div class="line">	<span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p68</span></div><div class="line">  	<span class="comment">//不使用var，造成的作用域问题</span></div><div class="line">	<span class="keyword">var</span> scope=<span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		scope=<span class="string">'local'</span>;</div><div class="line">		<span class="keyword">return</span> scope;</div><div class="line">	&#125;</div><div class="line">	checkscope();</div><div class="line">	<span class="built_in">console</span>.log(scope);</div><div class="line">	<span class="comment">//local</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p69</span></div><div class="line">  	<span class="comment">//函数作用域，非类c&#123;&#125;作用域</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> i=<span class="number">0</span>;</div><div class="line">		<span class="keyword">if</span>(<span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">var</span> j=<span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> k=<span class="number">0</span>;k&lt;<span class="number">10</span>;k++)&#123;</div><div class="line">				<span class="comment">//console.log(k);</span></div><div class="line">			&#125;</div><div class="line">			<span class="built_in">console</span>.log(k);</div><div class="line">			<span class="comment">//10</span></div><div class="line">		&#125;</div><div class="line">		<span class="built_in">console</span>.log(j);</div><div class="line">		<span class="comment">//0</span></div><div class="line">	&#125;</div><div class="line">	test();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p70</span></div><div class="line">  	<span class="comment">//删除全局变量</span></div><div class="line">	<span class="keyword">var</span> truevar=<span class="number">1</span>;</div><div class="line">	<span class="comment">//不可删除全局“变量”</span></div><div class="line">	fakevar1=<span class="number">2</span>;</div><div class="line">	<span class="comment">//全局“对象”的一个可删除属性</span></div><div class="line">	<span class="keyword">this</span>.fakevar2=<span class="number">3</span></div><div class="line">	<span class="comment">//同fakevar1</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> truevar);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> fakevar1);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> fakevar2);</div><div class="line">	<span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p75</span></div><div class="line">	<span class="keyword">var</span> square=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;</div><div class="line">	<span class="built_in">console</span>.log(square(<span class="number">2</span>));</div><div class="line">	<span class="comment">//4</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p83</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'1'</span>+<span class="number">2</span>);</div><div class="line">	<span class="comment">//string '12'</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>+&#123;&#125;);</div><div class="line">	<span class="comment">//string '1[object Object]'</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="literal">true</span>+<span class="literal">true</span>);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>+<span class="literal">null</span>);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>+<span class="literal">undefined</span>);</div><div class="line">	<span class="comment">//NaN</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p84</span></div><div class="line">	<span class="keyword">var</span> i=<span class="number">1</span>,j=++i;</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(j);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="keyword">var</span> i=<span class="number">1</span>,j=i++;</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(j);</div><div class="line">	<span class="comment">//1</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p87</span></div><div class="line">	<span class="comment">//js对象比较是引用比较，不是值比较</span></div><div class="line">	<span class="keyword">var</span> a=<span class="literal">null</span>;</div><div class="line">	<span class="keyword">var</span> b=<span class="literal">null</span>;</div><div class="line">	<span class="built_in">console</span>.log(a===b);</div><div class="line">	<span class="comment">//true勘误</span></div><div class="line">	<span class="keyword">var</span> a=<span class="literal">undefined</span>;</div><div class="line">	<span class="keyword">var</span> b=<span class="literal">undefined</span>;</div><div class="line">	<span class="built_in">console</span>.log(a===b);</div><div class="line">	<span class="comment">//true勘误</span></div><div class="line">	<span class="keyword">var</span> a=<span class="literal">null</span>;</div><div class="line">	<span class="keyword">var</span> b=<span class="literal">undefined</span>;</div><div class="line">	<span class="built_in">console</span>.log(a==b);</div><div class="line">	<span class="keyword">var</span> a=<span class="literal">NaN</span>;</div><div class="line">	<span class="keyword">var</span> b=<span class="literal">NaN</span>;</div><div class="line">	<span class="built_in">console</span>.log(a==b);</div><div class="line">	<span class="built_in">console</span>.log(a===b);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(a==a);</div><div class="line">	<span class="built_in">console</span>.log(a===a);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	a=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	b=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="built_in">console</span>.log(a==b);</div><div class="line">	<span class="built_in">console</span>.log(a===b);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="keyword">var</span> a=<span class="literal">null</span>;</div><div class="line">	<span class="keyword">var</span> b=<span class="literal">undefined</span>;</div><div class="line">	<span class="built_in">console</span>.log(a==b);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'1'</span>==<span class="number">1</span>);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="literal">true</span>==<span class="number">1</span>);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="literal">false</span>==<span class="number">0</span>);</div><div class="line">	<span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p89</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'11'</span>&lt;<span class="string">'2'</span>);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'1'</span>&lt;<span class="number">2</span>);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'one'</span>&lt;<span class="number">3</span>)</div><div class="line">	<span class="comment">//false 'one'-&gt;NaN&lt;3</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p90</span></div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">1</span>&#125;;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'toString'</span> <span class="keyword">in</span> p);</div><div class="line">	<span class="comment">//true</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> d=[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">7</span> <span class="keyword">in</span> d);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">0</span> <span class="keyword">in</span> d);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="number">3</span> <span class="keyword">in</span> d);</div><div class="line">	<span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p92</span></div><div class="line">	<span class="comment">//短路</span></div><div class="line">	<span class="keyword">if</span>(a==b) stop();</div><div class="line">	(a==b) &amp;&amp; stop();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p95</span></div><div class="line">	<span class="keyword">var</span> i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">2</span>];</div><div class="line">	data[i++]*=<span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(data);</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//[2,2]</span></div><div class="line">	<span class="comment">//1</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">	data[++i]*=<span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(data);</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//[1,4,3]</span></div><div class="line">	<span class="comment">//1</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">2</span>];</div><div class="line">	data[i++]=data[i++]*<span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(data);</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//[4,2]</span></div><div class="line">	<span class="comment">//2</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">	data[++i]=data[++i]*<span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(data);</div><div class="line">	<span class="built_in">console</span>.log(i);</div><div class="line">	<span class="comment">//[1,6,3]</span></div><div class="line">	<span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//96</span></div><div class="line">	<span class="comment">//eval解释运行有js源代码组成的字符串</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">'3+2'</span>));</div><div class="line">	<span class="comment">//5</span></div><div class="line">	f=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">eval</span>(<span class="string">'function f(x)&#123;return x+1&#125;'</span>);</div><div class="line">		<span class="keyword">return</span> f(<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(f());</div><div class="line">	<span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p97</span></div><div class="line">	<span class="keyword">var</span> x=<span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> x=<span class="string">'local'</span>;</div><div class="line">		<span class="built_in">eval</span>(<span class="string">"x+=' changed'"</span>);</div><div class="line">		<span class="keyword">return</span> x;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(f(),x);</div><div class="line">	<span class="comment">//local changed global</span></div><div class="line"></div><div class="line">	geval=<span class="built_in">eval</span>;</div><div class="line">	<span class="keyword">var</span> y=<span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> y=<span class="string">'local'</span>;</div><div class="line">		geval(<span class="string">"y+=' changed'"</span>);</div><div class="line">		<span class="keyword">return</span> y;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(g(),y);</div><div class="line">	<span class="comment">//local global changed</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p100</span></div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="keyword">delete</span> o.x;</div><div class="line">	<span class="built_in">console</span>.log(o);</div><div class="line">	<span class="comment">//&#123;y:2&#125;</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">	<span class="keyword">delete</span> a[<span class="number">2</span>];</div><div class="line">	<span class="built_in">console</span>.log(a);</div><div class="line">	<span class="comment">//[1,2]</span></div><div class="line">	<span class="built_in">console</span>.log(a.length);</div><div class="line">	<span class="comment">//3</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> o.x);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> o.x);</div><div class="line">	<span class="comment">//undefined</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> o.x);</div><div class="line">	<span class="comment">//true 删除不存在的属性，返回true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> o);</div><div class="line">	<span class="comment">//false 不能删除通过var申明的变量</span></div><div class="line">	<span class="keyword">this</span>.x=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> x);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(x);</div><div class="line">	<span class="comment">//运行时错误</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p117</span></div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>,<span class="attr">z</span>:<span class="number">3</span>&#125;;</div><div class="line">	<span class="keyword">var</span> a=[],i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(a[i++] <span class="keyword">in</span> o);</div><div class="line">	<span class="built_in">console</span>.log(a);</div><div class="line">	<span class="comment">//['x','y','z']</span></div><div class="line">	<span class="keyword">for</span>(x <span class="keyword">in</span> a) <span class="built_in">console</span>.log(x);</div><div class="line">	<span class="comment">//0 1 2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p123</span></div><div class="line">	<span class="comment">//阶层函数</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(x&lt;<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'x不能是负数'</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> f=<span class="number">1</span>;x&gt;<span class="number">1</span>;f*=x,x--);</div><div class="line">		<span class="keyword">return</span> f;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		<span class="keyword">var</span> n=<span class="built_in">Number</span>(prompt(<span class="string">'请输入一个正整数'</span>,<span class="string">''</span>));</div><div class="line">		<span class="keyword">var</span> f=factorial(n);</div><div class="line">		alert(n+<span class="string">'!='</span>+f);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">catch</span>(ex)&#123;</div><div class="line">		alert(ex);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">finally</span>&#123;&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p126</span></div><div class="line"><span class="comment">/*</span></div><div class="line">	with(document.forms[0])&#123;</div><div class="line">		name.value='';</div><div class="line">		address.value='';</div><div class="line">		email.value='';</div><div class="line">	&#125;</div><div class="line">*/</div><div class="line"></div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="keyword">with</span>(o) x=<span class="number">10</span>;</div><div class="line">	<span class="built_in">console</span>.log(o);</div><div class="line">	<span class="comment">//&#123;x:10,y:2&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  	<span class="comment">//p126</span></div><div class="line">	<span class="comment">//断点调试</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">undefined</span>) <span class="keyword">debugger</span>;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'functon excute'</span>);</div><div class="line">	&#125;</div><div class="line">	f();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p134</span></div><div class="line">	<span class="comment">//通过原型继承创建一个新对象</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//防止对o的意外修改</span></div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="string">'dont\'t change this value'</span>&#125;;</div><div class="line">	library_function(inherit(o));</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//137</span></div><div class="line">	<span class="comment">//通过原型继承创建一个新对象</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> o=&#123;&#125;;</div><div class="line">	o.x=<span class="number">1</span>;</div><div class="line">	<span class="keyword">var</span> p=inherit(o);</div><div class="line">	p.y=<span class="number">2</span>;</div><div class="line">	<span class="keyword">var</span> q=inherit(p);</div><div class="line">	q.z=<span class="number">3</span>;</div><div class="line">	<span class="built_in">console</span>.log(q.x);</div><div class="line">	<span class="built_in">console</span>.log(q.y);</div><div class="line">	<span class="built_in">console</span>.log(q.z);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//138</span></div><div class="line"><span class="comment">//通过原型继承创建一个新对象</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">	<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">	<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">	<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">	<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">	f.prototype=p;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> unitcircle=&#123;<span class="attr">r</span>:<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> c=inherit(unitcircle);</div><div class="line">c.r=<span class="number">2</span>;</div><div class="line"><span class="built_in">console</span>.log(unitcircle.r);</div><div class="line"><span class="comment">//1</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p138</span></div><div class="line">	<span class="keyword">var</span> book=&#123;<span class="attr">subtitle</span>:&#123;<span class="attr">length</span>:<span class="number">100</span>&#125;&#125;</div><div class="line">	<span class="keyword">var</span> len=<span class="literal">undefined</span>;</div><div class="line">	<span class="keyword">if</span>(book)&#123;</div><div class="line">		<span class="keyword">if</span>(book.subtitle) len=book.subtitle.length;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(len);</div><div class="line">	<span class="comment">//100</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> book=&#123;<span class="attr">subtitle</span>:&#123;<span class="attr">length</span>:<span class="number">100</span>&#125;&#125;</div><div class="line">	<span class="keyword">var</span> len=<span class="literal">undefined</span>;</div><div class="line">	len=book &amp;&amp; book.subtitle &amp;&amp; book.subtitle.length;</div><div class="line">	<span class="built_in">console</span>.log(len);</div><div class="line">	<span class="comment">//100</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p140</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line">	<span class="keyword">var</span> q=inherit(p);</div><div class="line">	p.y=<span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(p);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(q);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> q.y);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(q);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	q.z=<span class="number">3</span>;</div><div class="line">	<span class="built_in">console</span>.log(p);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p140</span></div><div class="line">	<span class="keyword">var</span> x=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> <span class="keyword">this</span>.x);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(x);</div><div class="line">	<span class="comment">//1</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> <span class="keyword">this</span>.f);</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="keyword">this</span>.y=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> y);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(y);</div><div class="line">	<span class="comment">//undefined error</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">1</span>&#125;;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">2</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">		<span class="keyword">delete</span> o.x;</div><div class="line">		<span class="built_in">console</span>.log(o);</div><div class="line">	&#125;</div><div class="line">	d();</div><div class="line">	<span class="comment">//&#123;y:2&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p141</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> o=inherit(&#123;<span class="attr">y</span>:<span class="number">2</span>&#125;);</div><div class="line">	o.x=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'x'</span> <span class="keyword">in</span> o);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(o.propertyIsEnumerable(<span class="string">'x'</span>));</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(o.hasOwnProperty(<span class="string">'x'</span>));</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'y'</span> <span class="keyword">in</span> o);</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(o.propertyIsEnumerable(<span class="string">'y'</span>));</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(o.hasOwnProperty(<span class="string">'y'</span>));</div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="comment">//继承而来不可枚举</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p142</span></div><div class="line">	<span class="keyword">for</span>(p <span class="keyword">in</span> o)&#123;</div><div class="line">		<span class="keyword">if</span>(!o.hasOwnProperty(p)) <span class="keyword">continue</span>;<span class="comment">//跳过继承的属性</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(p <span class="keyword">in</span> o)&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> o[p]===<span class="string">'function'</span>) <span class="keyword">continue</span>;<span class="comment">//跳过方法</span></div><div class="line">	&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p142</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">o,p</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(prop <span class="keyword">in</span> p)&#123;</div><div class="line">			o[prop]=p[prop];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> o;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> o=&#123;&#125;;</div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="built_in">console</span>.log(extend(o,p));</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	p.z=<span class="number">3</span>;</div><div class="line">	<span class="built_in">console</span>.log(o);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line">	<span class="keyword">var</span> o=p;</div><div class="line">	<span class="built_in">console</span>.log(o);</div><div class="line">	<span class="comment">//&#123;x:1,y:2&#125;</span></div><div class="line">	p.z=<span class="number">3</span>;</div><div class="line">	<span class="built_in">console</span>.log(o);</div><div class="line">	<span class="comment">//&#123;x:1,y:2,z:3&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p143</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">o,p</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(prop <span class="keyword">in</span> p)&#123;</div><div class="line">			<span class="keyword">if</span>(o.hasOwnProperty[prop]) <span class="keyword">continue</span>;</div><div class="line">			o[prop]=p[prop];	</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">restrict</span>(<span class="params">o,p</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(prop <span class="keyword">in</span> o)&#123;</div><div class="line">			<span class="keyword">if</span>(!(prop <span class="keyword">in</span> p)) <span class="keyword">delete</span> o[prop];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> o;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">union</span>(<span class="params">o,p</span>)</span>&#123;<span class="keyword">return</span> extend(extend(&#123;&#125;,o),p)&#125;</div><div class="line">	<span class="comment">//extend&#123;o,p&#125; if coding like this,o changed</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">intersection</span>(<span class="params">o,p</span>)</span>&#123;<span class="keyword">return</span> restrict(extend(&#123;&#125;,o),p)&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p144</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">keys</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> o !==<span class="string">'object'</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">var</span> result=[];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> o)&#123;</div><div class="line">			<span class="keyword">if</span>(o.hasOwnProperty(prop))</div><div class="line">				result.push(prop);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//keys()类似于Object.keys() Object.getOwnPropertyNames()</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//145</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> p=&#123;</div><div class="line">		<span class="attr">x</span>:<span class="number">1.0</span>,</div><div class="line">		<span class="attr">y</span>:<span class="number">1.0</span>,</div><div class="line">		get r()&#123;<span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="keyword">this</span>.x*<span class="keyword">this</span>.x+<span class="keyword">this</span>.y*<span class="keyword">this</span>.y);&#125;,</div><div class="line">		set r(newvalue)&#123;</div><div class="line">			<span class="keyword">var</span> oldvalue=<span class="built_in">Math</span>.sqrt(<span class="keyword">this</span>.x*<span class="keyword">this</span>.x+<span class="keyword">this</span>.y*<span class="keyword">this</span>.y);</div><div class="line">			<span class="keyword">var</span> ratio=newvalue/oldvalue;</div><div class="line">			<span class="keyword">this</span>.x*=ratio;</div><div class="line">			<span class="keyword">this</span>.y*=ratio;</div><div class="line">		&#125;,</div><div class="line">		get theta()&#123;<span class="keyword">return</span> <span class="built_in">Math</span>.atan2(<span class="keyword">this</span>.y,<span class="keyword">this</span>.x);&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> q=inherit(p);</div><div class="line">	q.x=<span class="number">1</span>,q.y=<span class="number">1</span>;</div><div class="line">	<span class="built_in">console</span>.log(q.r);</div><div class="line">	<span class="built_in">console</span>.log(q.theta);</div><div class="line"></div><div class="line">	<span class="keyword">var</span> serialnum=&#123;</div><div class="line">		<span class="attr">$n</span>:<span class="number">0</span>,</div><div class="line">		get next()&#123;<span class="keyword">return</span> <span class="keyword">this</span>.$n++;&#125;,</div><div class="line">		set next(n)&#123;</div><div class="line">			<span class="keyword">if</span>(n&gt;=<span class="keyword">this</span>.$n)&#123;</div><div class="line">				<span class="keyword">this</span>.$n=n;</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				<span class="keyword">throw</span> <span class="string">'&lt; illegal'</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	snum=inherit(serialnum);</div><div class="line">	<span class="built_in">console</span>.log(snum.next);</div><div class="line">	<span class="comment">//0</span></div><div class="line">	<span class="built_in">console</span>.log(snum.next);</div><div class="line">	<span class="comment">//1</span></div><div class="line">	snum.next=<span class="number">-99</span>;</div><div class="line">	<span class="comment">//error &lt; illegal</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p147</span></div><div class="line">	<span class="keyword">var</span> o=&#123;&#125;;</div><div class="line">	<span class="built_in">Object</span>.defineProperty(o,<span class="string">'x'</span>,&#123;</div><div class="line">		<span class="attr">value</span>:<span class="number">1</span>,</div><div class="line">		<span class="attr">writable</span>:<span class="literal">true</span>,</div><div class="line">		<span class="attr">enumerable</span>:<span class="literal">false</span>,</div><div class="line">		<span class="attr">configurable</span>:<span class="literal">true</span>&#125;);</div><div class="line">	<span class="built_in">console</span>.log(o.x);</div><div class="line">	<span class="comment">//1</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(o));</div><div class="line">	<span class="comment">//[]不可枚举</span></div><div class="line">	<span class="built_in">Object</span>.defineProperty(o,<span class="string">'x'</span>,&#123;</div><div class="line">		<span class="attr">writable</span>:<span class="literal">false</span></div><div class="line">	&#125;);</div><div class="line">	<span class="built_in">console</span>.log(o.x=<span class="number">2</span>);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="built_in">console</span>.log(o.x);</div><div class="line">	<span class="comment">//1</span></div><div class="line">	<span class="built_in">Object</span>.defineProperty(o,<span class="string">'x'</span>,&#123;</div><div class="line">		<span class="attr">value</span>:<span class="number">2</span></div><div class="line">	&#125;);</div><div class="line">	<span class="built_in">console</span>.log(o.x);</div><div class="line">	<span class="comment">//2</span></div><div class="line">	<span class="comment">//只读，但是可配置configurable</span></div><div class="line">	<span class="built_in">Object</span>.defineProperty(o,<span class="string">'x'</span>,&#123;</div><div class="line">		<span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">0</span>&#125;</div><div class="line">	&#125;);</div><div class="line">	<span class="built_in">console</span>.log(o.x);</div><div class="line">	<span class="comment">//0</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p148</span></div><div class="line">	<span class="keyword">var</span> p=<span class="built_in">Object</span>.defineProperties(&#123;&#125;,&#123;</div><div class="line">		<span class="attr">x</span>:&#123;<span class="attr">value</span>:<span class="number">1</span>,<span class="attr">writable</span>:<span class="literal">true</span>,<span class="attr">enumerable</span>:<span class="literal">true</span>,<span class="attr">configurable</span>:<span class="literal">true</span>&#125;,</div><div class="line">		<span class="attr">y</span>:&#123;<span class="attr">value</span>:<span class="number">1</span>,<span class="attr">writable</span>:<span class="literal">true</span>,<span class="attr">enumerable</span>:<span class="literal">true</span>,<span class="attr">configurable</span>:<span class="literal">true</span>&#125;,</div><div class="line">		<span class="attr">z</span>:&#123;</div><div class="line">			<span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="keyword">this</span>.x*<span class="keyword">this</span>.x+<span class="keyword">this</span>.y*<span class="keyword">this</span>.y)&#125;,</div><div class="line">			<span class="attr">enumerable</span>:<span class="literal">true</span>,</div><div class="line">			<span class="attr">configurable</span>:<span class="literal">true</span></div><div class="line">		&#125;,</div><div class="line">	&#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//149</span></div><div class="line">	<span class="comment">//?</span></div><div class="line">	<span class="built_in">Object</span>.defineProperty(<span class="built_in">Object</span>.prototype,</div><div class="line">		<span class="string">'extend'</span>,</div><div class="line">		&#123;</div><div class="line">			<span class="attr">writable</span>:<span class="literal">true</span>,</div><div class="line">			<span class="attr">enumerable</span>:<span class="literal">false</span>,</div><div class="line">			<span class="attr">configurable</span>:<span class="literal">true</span>,</div><div class="line">			<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> names=<span class="built_in">Object</span>.getOwnPropertyNames(o);</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;names.length;i++)&#123;</div><div class="line">					<span class="keyword">if</span>(names[i] <span class="keyword">in</span> <span class="keyword">this</span>) <span class="keyword">continue</span>;</div><div class="line">					<span class="keyword">var</span> desc=<span class="built_in">Object</span>.getOwnPropertyDescriptor(o,names[i]);</div><div class="line">					<span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,names[i],desc);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;)</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line">	<span class="keyword">var</span> o=<span class="built_in">Object</span>.create(p);</div><div class="line">	<span class="built_in">console</span>.log(p.isPrototypeOf(o));</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.isPrototypeOf(p));</div><div class="line">	<span class="comment">//true</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">classof</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">null</span>) <span class="keyword">return</span> <span class="string">'Null'</span>;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">undefined</span>) <span class="keyword">return</span> <span class="string">'Undefined'</span>;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(<span class="number">0</span>).slice(<span class="number">8</span>,<span class="number">-1</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//Object.preventExtensions()</span></div><div class="line">	<span class="comment">//Object.seal()</span></div><div class="line">	<span class="comment">//Object.freeze()</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p151	</span></div><div class="line">	<span class="keyword">var</span> p=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line">	<span class="keyword">var</span> o=<span class="built_in">Object</span>.create(p);</div><div class="line">	<span class="built_in">console</span>.log(p.isPrototypeOf(o));</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.isPrototypeOf(p));</div><div class="line">	<span class="comment">//true</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">classof</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">null</span>) <span class="keyword">return</span> <span class="string">'Null'</span>;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">undefined</span>) <span class="keyword">return</span> <span class="string">'Undefined'</span>;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(<span class="number">0</span>).slice(<span class="number">8</span>,<span class="number">-1</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//Object.preventExtensions()</span></div><div class="line">	<span class="comment">//Object.seal()</span></div><div class="line">	<span class="comment">//Object.freeze()</span></div><div class="line"></div><div class="line">	o=&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:&#123;<span class="attr">z</span>:[<span class="literal">false</span>,<span class="literal">null</span>,<span class="string">''</span>]&#125;&#125;;</div><div class="line">	s=<span class="built_in">JSON</span>.stringify(o);</div><div class="line">	p=<span class="built_in">JSON</span>.parse(s);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//168</span></div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">	data.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v,i,a</span>)</span>&#123;a[i]=v+<span class="number">1</span>;&#125;);</div><div class="line">	<span class="built_in">console</span>.log(data);</div><div class="line">	</div><div class="line">	<span class="comment">//170</span></div><div class="line">	<span class="keyword">var</span> a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">	<span class="keyword">var</span> sum=a.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y&#125;,<span class="number">0</span>);</div><div class="line">	<span class="built_in">console</span>.log(sum);</div><div class="line">	<span class="comment">//15</span></div><div class="line">	<span class="keyword">var</span> product=a.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y&#125;,<span class="number">1</span>);</div><div class="line">	<span class="built_in">console</span>.log(product);</div><div class="line">	<span class="comment">//120</span></div><div class="line">	<span class="keyword">var</span> max=a.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x&gt;y?x:y&#125;);</div><div class="line">	<span class="built_in">console</span>.log(max);</div><div class="line">	<span class="comment">//5</span></div><div class="line"></div><div class="line">	<span class="comment">//p171</span></div><div class="line">	<span class="keyword">var</span> a=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</div><div class="line">	<span class="keyword">var</span> fn=<span class="function"><span class="keyword">function</span>(<span class="params">accumulator,value</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Math</span>.pow(value,accumulator);</div><div class="line">	&#125;;</div><div class="line">	<span class="built_in">console</span>.log(a.reduceRight(fn));</div><div class="line">	<span class="built_in">console</span>.log(a.reduce(fn));</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p172</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">o,p</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(prop <span class="keyword">in</span> p)&#123;</div><div class="line">			o[prop]=p[prop];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> o;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">union</span>(<span class="params">o,p</span>)</span>&#123;<span class="keyword">return</span> extend(extend(&#123;&#125;,o),p)&#125;</div><div class="line">	<span class="keyword">var</span> objects=[&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">y</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">z</span>:<span class="number">3</span>&#125;];</div><div class="line">	<span class="keyword">var</span> merged=objects.reduce(union);</div><div class="line">	<span class="built_in">console</span>.log(merged);</div><div class="line">	<span class="comment">//&#123;x:1;y:2;z:3&#125;</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> objects=[&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">a</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">y</span>:<span class="number">2</span>,<span class="attr">a</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">z</span>:<span class="number">3</span>,<span class="attr">a</span>:<span class="number">3</span>&#125;];</div><div class="line">	<span class="built_in">console</span>.log(objects.reduce(union));</div><div class="line">	<span class="comment">//&#123;x:1,y:2,z:3,a:3&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(objects.reduceRight(union));</div><div class="line">	<span class="comment">//&#123;x:1,y:2,z:3,a:1&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//172</span></div><div class="line">	a=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>];</div><div class="line">	<span class="built_in">console</span>.log(a.indexOf(<span class="number">1</span>));</div><div class="line">	<span class="comment">//0</span></div><div class="line">	<span class="built_in">console</span>.log(a.indexOf(<span class="number">1</span>,<span class="number">1</span>));</div><div class="line">	<span class="comment">//1</span></div><div class="line">	<span class="built_in">console</span>.log(a.lastIndexOf(<span class="number">1</span>));</div><div class="line">	<span class="comment">//5</span></div><div class="line">	<span class="built_in">console</span>.log(a.indexOf(<span class="number">3</span>));</div><div class="line">	<span class="comment">//-1</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">findall</span>(<span class="params">a,x</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> results=[],</div><div class="line">			len=a.length,</div><div class="line">			pos=<span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(pos&lt;len)&#123;</div><div class="line">			pos=a.indexOf(x,pos);</div><div class="line">			<span class="keyword">if</span>(pos===<span class="number">-1</span>) <span class="keyword">break</span>;</div><div class="line">			results.push(pos);</div><div class="line">			pos=pos+<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> results;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(findall(a,<span class="number">1</span>));</div><div class="line">	<span class="comment">//[0,1,3,5]</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//175</span></div><div class="line">	<span class="keyword">var</span> a=&#123;<span class="string">'0'</span>:<span class="string">'a'</span>,<span class="string">'1'</span>:<span class="string">'b'</span>,<span class="string">'2'</span>:<span class="string">'c'</span>,<span class="attr">length</span>:<span class="number">3</span>&#125;;</div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.join.call(a,<span class="string">"+"</span>));</div><div class="line">	<span class="comment">//'a+b+c'</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.slice.call(a,<span class="number">0</span>));</div><div class="line">	<span class="comment">//['a','b','c']</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.map.call(a,<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> x.toUpperCase();</div><div class="line">	&#125;));</div><div class="line">	<span class="comment">//['A','B','C']</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> s=<span class="string">'test'</span>;</div><div class="line">	<span class="built_in">console</span>.log(s.charAt(<span class="number">0</span>));</div><div class="line">	<span class="comment">//t</span></div><div class="line">	<span class="built_in">console</span>.log(s[<span class="number">1</span>]);</div><div class="line">	<span class="comment">//e</span></div><div class="line"></div><div class="line">	s=<span class="string">'Javascript'</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.join.call(s,<span class="string">' '</span>));</div><div class="line">	<span class="comment">//J a v a s c r i p t</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.filter.call(s,</div><div class="line">		<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> x.match(<span class="regexp">/[^aeiou]/</span>);</div><div class="line">		&#125;).join(<span class="string">''</span>));</div><div class="line">	<span class="comment">//Jvscrpt</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p178</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(x&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">return</span> x*factorial(x<span class="number">-1</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> calculator=&#123;</div><div class="line">		<span class="attr">operand1</span>:<span class="number">1</span>,</div><div class="line">		<span class="attr">operand2</span>:<span class="number">1</span>,</div><div class="line">		<span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">this</span>.result=<span class="keyword">this</span>.operand1+<span class="keyword">this</span>.operand2;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	calculator.add();</div><div class="line">	<span class="built_in">console</span>.log(calculator.result);</div><div class="line">	<span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p183</span></div><div class="line">	<span class="keyword">var</span> o=&#123;</div><div class="line">		<span class="attr">m</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> self=<span class="keyword">this</span>;</div><div class="line">			<span class="built_in">console</span>.log(<span class="keyword">this</span>===o);</div><div class="line">			f();</div><div class="line"></div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log(<span class="keyword">this</span>===o);</div><div class="line">				<span class="built_in">console</span>.log(self===o);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	o.m();</div><div class="line">	<span class="comment">//true</span></div><div class="line">	<span class="comment">//false</span></div><div class="line">	<span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p185</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">getPropertyNames</span>(<span class="params">o,a</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(a===<span class="literal">undefined</span>) a=[];</div><div class="line">		<span class="comment">//a=a || [];</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> property <span class="keyword">in</span> o) a.push(property);</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x,y,z</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">arguments</span>.length!=<span class="number">3</span>)&#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'function f called with'</span>+<span class="built_in">arguments</span>.length+<span class="string">'arguments,but it expects 3 arguments'</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log(<span class="string">'execute'</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</div><div class="line">	f(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p186</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">Number</span>.NEGATIVE_INFINITY);</div><div class="line">	<span class="comment">//-INFINITY</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">max</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> max=<span class="built_in">Number</span>.NEGATIVE_INFINITY;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;i++)&#123;</div><div class="line">			<span class="keyword">if</span>(<span class="built_in">arguments</span>[i]&gt;max)&#123;max=<span class="built_in">arguments</span>[i]&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> max;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(max(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>));</div><div class="line">	<span class="comment">//p187</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(x);</div><div class="line">		<span class="built_in">arguments</span>[<span class="number">0</span>]=<span class="literal">null</span>;</div><div class="line">		<span class="built_in">console</span>.log(x);</div><div class="line">	&#125;</div><div class="line">	f(<span class="number">1</span>);</div><div class="line">	<span class="comment">//p188</span></div><div class="line">	<span class="keyword">var</span> factorial=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(x&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">return</span> x* <span class="built_in">arguments</span>.callee(x<span class="number">-1</span>);</div><div class="line">		<span class="comment">//callee</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(factorial(<span class="number">3</span>));</div><div class="line">	<span class="comment">//p188</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">arraycopy</span>(<span class="params">from,from_start,to,to_start,length</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(f <span class="keyword">in</span> <span class="keyword">from</span>)&#123;</div><div class="line">			<span class="keyword">if</span>(f&gt;=from_start &amp;&amp; f&lt;from_start+length)&#123;</div><div class="line">				to[to_start+(f-from_start)]=<span class="keyword">from</span>[f];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> to;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">easycopy</span>(<span class="params">args</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> arraycopy(args.from,</div><div class="line">			  			args.from_start || <span class="number">0</span>,</div><div class="line">			  			args.to,</div><div class="line">			  			args.to_start || <span class="number">0</span>,</div><div class="line">			  			args.length);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(easycopy(&#123;<span class="attr">from</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],<span class="attr">from_start</span>:<span class="number">2</span>,<span class="attr">to</span>:[],<span class="attr">to_start</span>:<span class="number">4</span>,<span class="attr">length</span>:<span class="number">2</span>&#125;));</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p191</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;</div><div class="line">    <span class="keyword">var</span> s=square;</div><div class="line">    <span class="built_in">console</span>.log(s(<span class="number">3</span>));</div><div class="line">    <span class="comment">//9</span></div><div class="line">    <span class="keyword">var</span> o=&#123;<span class="attr">square</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;&#125;</div><div class="line">    <span class="built_in">console</span>.log(o.square(<span class="number">3</span>));</div><div class="line">    <span class="comment">//9</span></div><div class="line">    <span class="keyword">var</span> a=[<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;,<span class="number">3</span>];</div><div class="line">    <span class="built_in">console</span>.log(a[<span class="number">0</span>](a[<span class="number">1</span>]));</div><div class="line">    <span class="comment">//9</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subtract</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x-y;&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y;&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">divide</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x/y;&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">op</span>(<span class="params">operator,op1,op2</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> operator(op1,op2);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(op(add,op(add,<span class="number">2</span>,<span class="number">3</span>),op(multiply,<span class="number">4</span>,<span class="number">5</span>)));</div><div class="line">    <span class="comment">//(2+3)+(4*5)//25</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> ops=&#123;</div><div class="line">        <span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;,</div><div class="line">        <span class="attr">subtract</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x-y;&#125;,</div><div class="line">        <span class="attr">multiply</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y;&#125;,</div><div class="line">        <span class="attr">divide</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x/y;&#125;,</div><div class="line">        <span class="attr">pow</span>:<span class="built_in">Math</span>.pow</div><div class="line">    &#125;;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">opA</span>(<span class="params">operation,op1,op2</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> ops[operation]===<span class="string">'function'</span>)&#123;</div><div class="line">            <span class="keyword">return</span> ops[operation](op1,op2);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="string">'unknow operator'</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p192</span></div><div class="line">    x.counter=<span class="number">0</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> ++x.counter;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(x());</div><div class="line">    <span class="comment">//1</span></div><div class="line"></div><div class="line">	<span class="comment">//勘误cache做不到</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">isFinite</span>(n) &amp;&amp; n&gt;<span class="number">0</span> &amp;&amp; n==<span class="built_in">Math</span>.round(n))&#123;</div><div class="line">            <span class="keyword">if</span>(!(n <span class="keyword">in</span> factorial))&#123;</div><div class="line">                factorial[n]=n*factorial(n<span class="number">-1</span>);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">return</span> factorial[n];                 </div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">NaN</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p195</span></div><div class="line">    <span class="keyword">var</span> scope=<span class="string">'global'</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> scope=<span class="string">'local'</span>;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> scope;&#125;</div><div class="line">        <span class="keyword">return</span> f();</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(checkscope());</div><div class="line">    <span class="comment">//local</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p195</span></div><div class="line">    <span class="keyword">var</span> scope=<span class="string">'global'</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> scope=<span class="string">'local'</span>;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> scope;&#125;</div><div class="line">        <span class="keyword">return</span> f;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(checkscope()());</div><div class="line">    <span class="comment">//local</span></div><div class="line">	<span class="comment">//函数执行时用到了作用域链，是其定义是创建的</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p197</span></div><div class="line">    <span class="keyword">var</span> uniqueInteger=(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> counter=<span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> counter++&#125;;</div><div class="line">    &#125;());</div><div class="line">    <span class="built_in">console</span>.log(uniqueInteger());</div><div class="line">    <span class="comment">//0</span></div><div class="line">    <span class="built_in">console</span>.log(uniqueInteger());</div><div class="line">    <span class="comment">//1</span></div><div class="line">    <span class="built_in">console</span>.log(uniqueInteger());</div><div class="line">    <span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p197</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> n=<span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">count</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> n++;&#125;,</div><div class="line">            <span class="attr">reset</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;n=<span class="number">0</span>;&#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> c=counter();</div><div class="line">    <span class="keyword">var</span> d=counter();</div><div class="line">    <span class="built_in">console</span>.log(c.count());</div><div class="line">    <span class="comment">//0</span></div><div class="line">    <span class="built_in">console</span>.log(d.count());</div><div class="line">    <span class="comment">//0</span></div><div class="line">    c.reset();</div><div class="line">    <span class="built_in">console</span>.log(c.count());</div><div class="line">    <span class="comment">//0</span></div><div class="line">    <span class="built_in">console</span>.log(d.count());</div><div class="line">    <span class="comment">//1</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p198</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span>&#123;</div><div class="line">            get count()&#123;<span class="keyword">return</span> n++&#125;,</div><div class="line">            set count(m)&#123;</div><div class="line">                <span class="keyword">if</span>(m&gt;=n)&#123;</div><div class="line">                    n=m;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'no smaller value'</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> c=counter(<span class="number">100</span>);</div><div class="line">    <span class="built_in">console</span>.log(c.count);</div><div class="line">    <span class="comment">//100</span></div><div class="line">    <span class="built_in">console</span>.log(c.count);</div><div class="line">    <span class="comment">//101</span></div><div class="line">    c.count=<span class="number">200</span>;</div><div class="line">    <span class="built_in">console</span>.log(c.count);</div><div class="line">    <span class="comment">//200</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p199</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addPrivateProperty</span>(<span class="params">o,name,predicate</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> value;</div><div class="line">        o[<span class="string">'get'</span>+name]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> value;&#125;</div><div class="line">        o[<span class="string">'set'</span>+name]=<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(predicate &amp;&amp; !predicate(v))&#123;</div><div class="line">                <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'set '</span>+name+<span class="string">':invalid value'</span>+v);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                value=v;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> o=&#123;&#125;;</div><div class="line">    addPrivateProperty(o,<span class="string">'Name'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">typeof</span> x==<span class="string">'string'</span>;&#125;);</div><div class="line">    o.setName(<span class="string">'kang'</span>);</div><div class="line">    <span class="built_in">console</span>.log(o.getName());</div><div class="line">    <span class="comment">//kang</span></div><div class="line">    o.setName(<span class="number">0</span>);</div><div class="line">    <span class="comment">//Error:...</span></div><div class="line">    <span class="comment">//用闭包实现私有属性存取</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p199</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">constfunc</span>(<span class="params">v</span>)</span>&#123;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> v;&#125;;&#125;</div><div class="line">    <span class="keyword">var</span> funcs=[];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">        funcs[i]=constfunc(i);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(funcs[<span class="number">5</span>]());</div><div class="line">    <span class="comment">//5</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">constfuncs</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> funcs=[];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">            funcs[i]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> i;&#125;;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> funcs;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> funcs=constfuncs();</div><div class="line">    <span class="built_in">console</span>.log(funcs[<span class="number">0</span>]());</div><div class="line">    <span class="built_in">console</span>.log(funcs[<span class="number">9</span>]());</div><div class="line">    <span class="comment">//10</span></div><div class="line">    <span class="comment">//关联到闭包的作用域链是“活动的”</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> self=<span class="keyword">this</span>;</div><div class="line">    <span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">    <span class="comment">//闭包绑定了自己的this和arguments，无法访问函数外的，除非保存至另外一个变量中</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p201</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">args</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> actual=args.length;</div><div class="line">        <span class="keyword">var</span> expected=args.callee.length;</div><div class="line">        <span class="keyword">if</span>(actual!==expected)&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'expected '</span>+expected+<span class="string">' args;got '</span>+actual);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x,y,z</span>)</span>&#123;</div><div class="line">        check(<span class="built_in">arguments</span>);</div><div class="line">        <span class="keyword">return</span> x+y+z;</div><div class="line">    &#125;</div><div class="line">    f(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">    <span class="comment">//Error:...</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p202</span></div><div class="line">    <span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">    <span class="keyword">var</span> biggest=<span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>,arr);</div><div class="line">    <span class="built_in">console</span>.log(biggest);</div><div class="line">    <span class="comment">//3</span></div><div class="line">    <span class="keyword">var</span> biggest=<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr);</div><div class="line">    <span class="built_in">console</span>.log(biggest);</div><div class="line">    <span class="comment">//3</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">trace</span>(<span class="params">o,m</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> original=o[m];</div><div class="line">        o[m]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(),<span class="string">'Entering:'</span>,m);</div><div class="line"></div><div class="line">            <span class="keyword">var</span> result=original.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</div><div class="line"></div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(),<span class="string">'Exiting:'</span>,m);</div><div class="line"></div><div class="line">            <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> o=&#123;</div><div class="line">        <span class="attr">m</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="string">'r u ok'</span>;&#125;</div><div class="line">    &#125;;</div><div class="line">    trace(o,<span class="string">'m'</span>);</div><div class="line">    <span class="built_in">console</span>.log(o.m());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//p203</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.x+y;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</div><div class="line">    <span class="keyword">var</span> g=f.bind(o);</div><div class="line">    <span class="built_in">console</span>.log(g(<span class="number">2</span>));</div><div class="line">    <span class="comment">//3</span></div><div class="line"></div><div class="line"> 	<span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y&#125;;</div><div class="line"> 	<span class="keyword">var</span> succ=sum.bind(<span class="literal">null</span>,<span class="number">1</span>);</div><div class="line"> 	<span class="built_in">console</span>.log(succ(<span class="number">2</span>));</div><div class="line"> 	<span class="comment">//3</span></div><div class="line"> 	</div><div class="line"> 	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;	 	</div><div class="line">	 	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y,z</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x+y+z&#125;;</div><div class="line">	 	<span class="keyword">var</span> g=f.bind(&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,<span class="number">2</span>);</div><div class="line">	 	<span class="built_in">console</span>.log(g(<span class="number">3</span>));</div><div class="line">	 	<span class="comment">//6</span></div><div class="line"> 	&#125;());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p205</span></div><div class="line">	<span class="keyword">var</span> f=<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'return x*y;'</span>);</div><div class="line">	<span class="comment">//=</span></div><div class="line">	<span class="keyword">var</span> F=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> scope=<span class="string">'global'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">constructFunction</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> scope=<span class="string">'local'</span>;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'return scope'</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(constructFunction()());</div><div class="line">	<span class="comment">//global</span></div><div class="line">	<span class="comment">//无法捕获局部对象</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//206</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>];</div><div class="line">		<span class="keyword">var</span> total=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;data.length;i++)&#123;total+=data[i]&#125;;</div><div class="line">		<span class="keyword">var</span> mean=total/data.length;</div><div class="line">		<span class="built_in">console</span>.log(mean);<span class="comment">//3</span></div><div class="line"></div><div class="line">		total=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;data.length;i++)&#123;</div><div class="line">			<span class="keyword">var</span> deviation=data[i]-mean;</div><div class="line">			total+=deviation*deviation</div><div class="line"></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">var</span> stddev=<span class="built_in">Math</span>.sqrt(total/(data.length<span class="number">-1</span>));</div><div class="line">		<span class="built_in">console</span>.log(stddev);<span class="comment">//2</span></div><div class="line">	&#125;());</div><div class="line"></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;;</div><div class="line">		<span class="keyword">var</span> square=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;;</div><div class="line"></div><div class="line">		<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>];</div><div class="line">		<span class="keyword">var</span> mean=data.reduce(sum)/data.length;</div><div class="line">		<span class="built_in">console</span>.log(mean);<span class="comment">//3</span></div><div class="line">		<span class="keyword">var</span> deviations=data.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x-mean;&#125;);</div><div class="line">		<span class="keyword">var</span> stddev=<span class="built_in">Math</span>.sqrt(deviations.map(square).reduce(sum)/(data.length<span class="number">-1</span>));</div><div class="line">		<span class="built_in">console</span>.log(stddev);<span class="comment">//2</span></div><div class="line">	&#125;());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p208</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">not</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> result=f.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</div><div class="line">				<span class="keyword">return</span> !result;</div><div class="line">			&#125;;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">var</span> even=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> x%<span class="number">2</span>===<span class="number">0</span>;</div><div class="line">		&#125;;</div><div class="line">		<span class="keyword">var</span> odd=not(even);</div><div class="line">		<span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>].every(odd));</div><div class="line">		<span class="comment">//true</span></div><div class="line">		<span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].map(odd));</div><div class="line">		<span class="comment">//[true,false,true,false]</span></div><div class="line">	&#125;());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p209</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">mapper</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;<span class="keyword">return</span> a.map(f);&#125;;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">var</span> increment=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x+<span class="number">1</span>;&#125;;</div><div class="line">		<span class="keyword">var</span> incrementer=mapper(increment);</div><div class="line">		<span class="built_in">console</span>.log(incrementer([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]));</div><div class="line">		<span class="comment">//[2,3,4]</span></div><div class="line">	&#125;());</div><div class="line"></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">f,g</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">return</span> f.call(<span class="keyword">this</span>,g.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>));</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">var</span> square=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;;</div><div class="line">		<span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;;</div><div class="line">		<span class="keyword">var</span> squareofsum=compose(square,sum);</div><div class="line">		<span class="built_in">console</span>.log(squareofsum(<span class="number">2</span>,<span class="number">3</span>));</div><div class="line">		<span class="comment">//25</span></div><div class="line">	&#125;());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p210</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">array</span>(<span class="params">a,n</span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(a,n||<span class="number">0</span>);&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partialLeft</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(args,<span class="number">1</span>);</div><div class="line">			a=a.concat(array(<span class="built_in">arguments</span>));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partialRight</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(<span class="built_in">arguments</span>);</div><div class="line">			a=a.concat(array(args,<span class="number">1</span>));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partial</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(args,<span class="number">1</span>);</div><div class="line">			<span class="keyword">var</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span>(;i&lt;a.length;i++)&#123;</div><div class="line">				<span class="keyword">if</span>(a[i]===<span class="literal">undefined</span>)&#123;a[i]=<span class="built_in">arguments</span>[j++];&#125;</div><div class="line">			&#125;</div><div class="line">			a=a.concat(array(<span class="built_in">arguments</span>,j));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> f=<span class="function"><span class="keyword">function</span>(<span class="params">x,y,z</span>)</span>&#123;<span class="keyword">return</span> x*(y-z);&#125;;</div><div class="line">	<span class="built_in">console</span>.log(partialLeft(f,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>));<span class="comment">//-2//2*(3-4)</span></div><div class="line">	<span class="built_in">console</span>.log(partialRight(f,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>));<span class="comment">//6//3*(4-2)</span></div><div class="line">	<span class="built_in">console</span>.log(partial(f,<span class="literal">undefined</span>,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>));<span class="comment">//-6//3*(2-4)</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;;</div><div class="line">	<span class="keyword">var</span> increment=partialLeft(sum,<span class="number">1</span>);</div><div class="line">	<span class="built_in">console</span>.log(increment(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>));<span class="comment">//5//1+4</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> cuberoot=partialRight(<span class="built_in">Math</span>.pow,<span class="number">1</span>/<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(cuberoot(<span class="number">27</span>));<span class="comment">//3//27的1/3幂</span></div><div class="line"></div><div class="line">	<span class="built_in">String</span>.prototype.first=partial(<span class="built_in">String</span>.prototype.charAt,<span class="number">0</span>);</div><div class="line">	<span class="keyword">var</span> str=<span class="string">'abc'</span>;</div><div class="line">	<span class="built_in">console</span>.log(str.first(<span class="string">'anyvalue OR array'</span>));<span class="comment">//a</span></div><div class="line"></div><div class="line">	<span class="built_in">String</span>.prototype.last=partial(<span class="built_in">String</span>.prototype.substr,<span class="number">-1</span>,<span class="number">1</span>);</div><div class="line">	str=<span class="string">'abc'</span>;</div><div class="line">	<span class="built_in">console</span>.log(str.last(<span class="string">'anyvalue OR array'</span>));<span class="comment">//c</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">f,g</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> f.call(<span class="keyword">this</span>,g.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> not=partialLeft(compose,<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> !x;&#125;);</div><div class="line">	<span class="keyword">var</span> even=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x%<span class="number">2</span>===<span class="number">0</span>;&#125;;</div><div class="line">	<span class="keyword">var</span> odd=not(even);</div><div class="line">	<span class="built_in">console</span>.log(odd(<span class="number">1</span>));<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].map(odd))<span class="comment">//true false true false;</span></div><div class="line">	<span class="keyword">var</span> isNumber=not(<span class="built_in">isNaN</span>);</div><div class="line">	<span class="built_in">console</span>.log(isNumber(<span class="literal">undefined</span>));<span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p211</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">array</span>(<span class="params">a,n</span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(a,n||<span class="number">0</span>);&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partialLeft</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(args,<span class="number">1</span>);</div><div class="line">			a=a.concat(array(<span class="built_in">arguments</span>));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partialRight</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(<span class="built_in">arguments</span>);</div><div class="line">			a=a.concat(array(args,<span class="number">1</span>));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">partial</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> args=<span class="built_in">arguments</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> a=array(args,<span class="number">1</span>);</div><div class="line">			<span class="keyword">var</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span>(;i&lt;a.length;i++)&#123;</div><div class="line">				<span class="keyword">if</span>(a[i]===<span class="literal">undefined</span>)&#123;a[i]=<span class="built_in">arguments</span>[j++];&#125;</div><div class="line">			&#125;</div><div class="line">			a=a.concat(array(<span class="built_in">arguments</span>,j));</div><div class="line">			<span class="keyword">return</span> f.apply(<span class="keyword">this</span>,a);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>];</div><div class="line">	<span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;;</div><div class="line">	<span class="keyword">var</span> product=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y;&#125;;</div><div class="line">	</div><div class="line">	<span class="keyword">var</span> neg=partial(product,<span class="number">-1</span>);</div><div class="line">	<span class="built_in">console</span>.log(neg(<span class="number">99</span>));<span class="comment">//-99</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> square=partial(<span class="built_in">Math</span>.pow,<span class="literal">undefined</span>,<span class="number">2</span>);</div><div class="line">	<span class="built_in">console</span>.log(square(<span class="number">3</span>));<span class="comment">//9</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> sqrt=partial(<span class="built_in">Math</span>.pow,<span class="literal">undefined</span>,<span class="number">.5</span>);</div><div class="line">	<span class="built_in">console</span>.log(sqrt(<span class="number">9</span>));<span class="comment">//3</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> reciprocal=partial(<span class="built_in">Math</span>.pow,<span class="literal">undefined</span>,<span class="number">-1</span>);</div><div class="line">	<span class="built_in">console</span>.log(reciprocal(<span class="number">4</span>));<span class="comment">//0.25</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> mean=product(data.reduce(sum),reciprocal(data.length));</div><div class="line">	<span class="built_in">console</span>.log(mean);<span class="comment">//3</span></div><div class="line"></div><div class="line">	<span class="comment">//标准差的计算</span></div><div class="line">	<span class="comment">//没有运算符//函数式编程//类似于LISP</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p212</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">memorize</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> cache=&#123;&#125;;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> key=<span class="built_in">arguments</span>.length+<span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>,<span class="string">','</span>);</div><div class="line">			<span class="keyword">if</span>(key <span class="keyword">in</span> cache)&#123;</div><div class="line">				<span class="keyword">return</span> cache[key];</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				<span class="keyword">return</span> cache[key]=f.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">gcd</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> t;</div><div class="line">		<span class="keyword">if</span>(a&lt;b)&#123;</div><div class="line">			t=b,b=a,a=t;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">while</span>(b!=<span class="number">0</span>)&#123;</div><div class="line">			t=b,b=a%b,a=t;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//test if cache</span></div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'run gcd'</span>);</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> gcdmemo=memorize(gcd);</div><div class="line">	<span class="built_in">console</span>.log(gcdmemo(<span class="number">85</span>,<span class="number">187</span>));</div><div class="line">	<span class="comment">//run gcd</span></div><div class="line">	<span class="comment">//17</span></div><div class="line">	<span class="built_in">console</span>.log(gcdmemo(<span class="number">85</span>,<span class="number">187</span>));</div><div class="line">	<span class="comment">//17</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> factorial=memorize(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">		<span class="comment">//test if cache</span></div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'run factorial'</span>);</div><div class="line">		<span class="keyword">return</span>(n&lt;=<span class="number">1</span>?<span class="number">1</span>:n*factorial(n<span class="number">-1</span>));</div><div class="line">	&#125;);</div><div class="line">	<span class="built_in">console</span>.log(factorial(<span class="number">3</span>));</div><div class="line">	<span class="comment">//run factorial</span></div><div class="line">	<span class="comment">//run factorial</span></div><div class="line">	<span class="comment">//run factorial</span></div><div class="line">	<span class="comment">//6</span></div><div class="line">	<span class="built_in">console</span>.log(factorial(<span class="number">3</span>));</div><div class="line">	<span class="comment">//6</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p214</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(p==<span class="literal">null</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">Object</span>.create)</div><div class="line">			<span class="keyword">return</span> <span class="built_in">Object</span>.create(p);</div><div class="line">		<span class="keyword">var</span> t=<span class="keyword">typeof</span> p;</div><div class="line">		<span class="keyword">if</span>(t!==<span class="string">"object"</span> &amp;&amp; t!==<span class="string">"function"</span>) <span class="keyword">throw</span> <span class="built_in">TypeError</span>();</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">		f.prototype=p;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> f();	</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">range</span>(<span class="params">from,to</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> r=inherit(range.methods);</div><div class="line">		r.from=<span class="keyword">from</span>;</div><div class="line">		r.to=to;</div><div class="line">		<span class="keyword">return</span> r;</div><div class="line">	&#125;</div><div class="line">	range.methods=&#123;</div><div class="line">		<span class="attr">includes</span>:<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.from&lt;=x &amp;&amp; x&lt;=<span class="keyword">this</span>.to;</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">foreach</span>:<span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> x=<span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.from);x&lt;=<span class="keyword">this</span>.to;x++)&#123;</div><div class="line">				f(x);</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">toString</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="string">'('</span>+<span class="keyword">this</span>.from+<span class="string">'...'</span>+<span class="keyword">this</span>.to+<span class="string">')'</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> r=range(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(r.includes(<span class="number">2</span>));<span class="comment">//true</span></div><div class="line">	r.foreach(<span class="built_in">console</span>.log);<span class="comment">//1//2//3</span></div><div class="line">	<span class="built_in">console</span>.log(r);<span class="comment">//NOT(1...3)勘误</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p216</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Range</span>(<span class="params">from, to</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.from = <span class="keyword">from</span>;</div><div class="line">	    <span class="keyword">this</span>.to = to;</div><div class="line">	&#125;</div><div class="line">	Range.prototype = &#123;</div><div class="line">	    <span class="attr">includes</span>: <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.from &lt;= x &amp;&amp; x &lt;= <span class="keyword">this</span>.to; &#125;,</div><div class="line">	    <span class="attr">foreach</span>: <span class="function"><span class="keyword">function</span>(<span class="params">f</span>) </span>&#123;</div><div class="line">	        <span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.from); x &lt;= <span class="keyword">this</span>.to; x++) f(x);</div><div class="line">	    &#125;,</div><div class="line">	    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">"("</span> + <span class="keyword">this</span>.from + <span class="string">"..."</span> + <span class="keyword">this</span>.to + <span class="string">")"</span>; &#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> r = <span class="keyword">new</span> Range(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(r <span class="keyword">instanceof</span> Range);<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(r.includes(<span class="number">2</span>));<span class="comment">//true </span></div><div class="line">	r.foreach(<span class="built_in">console</span>.log);<span class="comment">//1//2//3</span></div><div class="line">	<span class="built_in">console</span>.log(r);<span class="comment">//Range&#123;from:1,to:3&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line"><span class="comment">//p218</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> F=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">	<span class="keyword">var</span> p=F.prototype;</div><div class="line">	<span class="keyword">var</span> c=p.constructor;</div><div class="line">	<span class="built_in">console</span>.log(c===F);<span class="comment">//true</span></div><div class="line">	<span class="keyword">var</span> o=<span class="keyword">new</span> F();</div><div class="line">	<span class="built_in">console</span>.log(o.constructor===F);<span class="comment">//true</span></div><div class="line">&#125;());</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> Range=<span class="function"><span class="keyword">function</span>(<span class="params">from, to</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.from = <span class="keyword">from</span>;</div><div class="line">	    <span class="keyword">this</span>.to = to;</div><div class="line">	&#125;</div><div class="line">	Range.prototype = &#123;</div><div class="line">		<span class="attr">constructor</span>:Range,</div><div class="line">	    <span class="attr">includes</span>: <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.from &lt;= x &amp;&amp; x &lt;= <span class="keyword">this</span>.to; &#125;,</div><div class="line">	    <span class="attr">foreach</span>: <span class="function"><span class="keyword">function</span>(<span class="params">f</span>) </span>&#123;</div><div class="line">	        <span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.from); x &lt;= <span class="keyword">this</span>.to; x++) f(x);</div><div class="line">	    &#125;,</div><div class="line">	    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">"("</span> + <span class="keyword">this</span>.from + <span class="string">"..."</span> + <span class="keyword">this</span>.to + <span class="string">")"</span>; &#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> o=<span class="keyword">new</span> Range(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(o.constructor===Range);<span class="comment">//true</span></div><div class="line">&#125;());</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> Range=<span class="function"><span class="keyword">function</span>(<span class="params">from, to</span>) </span>&#123;</div><div class="line">	    <span class="keyword">this</span>.from = <span class="keyword">from</span>;</div><div class="line">	    <span class="keyword">this</span>.to = to;</div><div class="line">	&#125;;</div><div class="line">	Range.prototype.includes=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.from&lt;=x &amp;&amp; x&lt;=<span class="keyword">this</span>.to;&#125;;</div><div class="line">	Range.prototype.foreach=<span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> x=<span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.from);x&lt;=<span class="keyword">this</span>.to;x++) f(x);&#125;;</div><div class="line">	Range.prototype.toString=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="string">"("</span>+<span class="keyword">this</span>.from+<span class="string">"..."</span>+<span class="keyword">this</span>.to+<span class="string">")"</span>;&#125;;</div><div class="line">	<span class="keyword">var</span> o=<span class="keyword">new</span> Range(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(o.constructor===Range);<span class="comment">//true</span></div><div class="line">&#125;());</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="comment">//p220</span></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Complex</span>(<span class="params">real,imaginary</span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">isNaN</span>(real) || <span class="built_in">isNaN</span>(imaginary))&#123;<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>();&#125;</div><div class="line">		<span class="keyword">this</span>.r=real;</div><div class="line">		<span class="keyword">this</span>.i=imaginary;</div><div class="line">	&#125;</div><div class="line">	Complex.prototype.add=<span class="function"><span class="keyword">function</span>(<span class="params">that</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Complex(<span class="keyword">this</span>.r+that.r,<span class="keyword">this</span>.i+that.i);</div><div class="line">	&#125;;</div><div class="line">	Complex.prototype.mul=<span class="function"><span class="keyword">function</span>(<span class="params">that</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Complex(<span class="keyword">this</span>.r*that.r-<span class="keyword">this</span>.i*that.i,<span class="keyword">this</span>.r*that.r+<span class="keyword">this</span>.i*that.i);</div><div class="line">	&#125;;</div><div class="line">	Complex.prototype.neg=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Complex(-<span class="keyword">this</span>.r,-<span class="keyword">this</span>.i);</div><div class="line">	&#125;;</div><div class="line">	Complex.prototype.toString=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">'&#123;'</span>+<span class="keyword">this</span>.r+<span class="string">','</span>+<span class="keyword">this</span>.i+<span class="string">'&#125;'</span>;</div><div class="line">	&#125;;</div><div class="line">	Complex.prototype.equals=<span class="function"><span class="keyword">function</span>(<span class="params">that</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> that!=<span class="literal">null</span> &amp;&amp; that.constructor===Complex &amp;&amp; <span class="keyword">this</span>.r===that.r &amp;&amp; <span class="keyword">this</span>.i===that.i;</div><div class="line">	&#125;;</div><div class="line">	Complex.ZERO=<span class="keyword">new</span> Complex(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">	Complex.ONE=<span class="keyword">new</span> Complex(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">	Complex.I=<span class="keyword">new</span> Complex(<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">	Complex.parse=<span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">			<span class="keyword">var</span> m=Complex._format.exec(s);</div><div class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Complex(<span class="built_in">parseFloat</span>(m[<span class="number">1</span>]),<span class="built_in">parseFloat</span>(m[<span class="number">2</span>]));</div><div class="line">		&#125;<span class="keyword">catch</span>(x)&#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"can't parse"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	Complex._format=<span class="regexp">/^\&#123;([^,]+),([^&#125;]+)\&#125;$/</span>;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> c=<span class="keyword">new</span> Complex(<span class="number">2</span>,<span class="number">3</span>);</div><div class="line">	<span class="keyword">var</span> d=<span class="keyword">new</span> Complex(c.i,c.r);</div><div class="line">	<span class="built_in">console</span>.log(c.toString());<span class="comment">//&#123;2,3&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(d.toString());<span class="comment">//&#123;3,2&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(c.add(d).toString());<span class="comment">//&#123;5,5&#125;</span></div><div class="line">	<span class="built_in">console</span>.log(Complex.parse(c.toString()));</div><div class="line">	<span class="built_in">console</span>.log(Complex.parse(c.toString()).add(c.neg()));</div><div class="line">	<span class="built_in">console</span>.log(Complex.parse(c.toString()).add(c.neg()).equals(Complex.ZERO));<span class="comment">//true</span></div><div class="line">	<span class="built_in">console</span>.log(c.ZERO);<span class="comment">//undefined</span></div><div class="line"></div><div class="line">	<span class="comment">//p223</span></div><div class="line">	Complex.prototype.conj=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">new</span> Complex(<span class="keyword">this</span>.r,-<span class="keyword">this</span>.i);&#125;;</div><div class="line">	<span class="built_in">console</span>.log(c.conj().toString());<span class="comment">//&#123;2,-3&#125;</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">var</span> n=<span class="number">3</span>;</div><div class="line">	<span class="built_in">Number</span>.prototype.times=<span class="function"><span class="keyword">function</span>(<span class="params">f,context</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> n=<span class="built_in">Number</span>(<span class="keyword">this</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;n;i++) f.call(<span class="literal">null</span>,i);</div><div class="line">	&#125;;</div><div class="line">	n.times(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="built_in">console</span>.log(n+<span class="string">'hello'</span>);&#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> t,c,n;</div><div class="line">		<span class="keyword">if</span>(o===<span class="literal">null</span>) <span class="keyword">return</span> <span class="string">'null'</span>;</div><div class="line">		<span class="keyword">if</span>(o!==o) <span class="keyword">return</span> <span class="string">'NaN'</span>;</div><div class="line">		<span class="keyword">if</span>((t=<span class="keyword">typeof</span> o)!==<span class="string">'object'</span>) <span class="keyword">return</span> t;</div><div class="line">		<span class="keyword">if</span>((c=classof(o))!==<span class="string">'Object'</span>) <span class="keyword">return</span> c;</div><div class="line">		<span class="keyword">if</span>(o.constructor &amp;&amp; <span class="keyword">typeof</span> o.constructor===<span class="string">'function'</span> &amp;&amp; (n=o.constructor.getName())) <span class="keyword">return</span> n;</div><div class="line">		<span class="keyword">return</span> <span class="string">'Object'</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">classof</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(o).slice(<span class="number">8</span>,<span class="number">-1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">Function</span>.prototype.getName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="string">'name'</span> <span class="keyword">in</span> <span class="keyword">this</span>) <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name=<span class="keyword">this</span>.toString().match(<span class="regexp">/function\s*([^(]*)\(/</span>)[<span class="number">1</span>];</div><div class="line">	&#125;;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="number">1</span>);<span class="comment">//number</span></div><div class="line">	<span class="built_in">console</span>.log(type(<span class="number">1</span>));<span class="comment">//number</span></div><div class="line">	<span class="keyword">var</span> Complex=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">this</span>.r=x;<span class="keyword">this</span>.i=y;&#125;;</div><div class="line">	<span class="built_in">console</span>.log(type(Complex));<span class="comment">//function</span></div><div class="line">	<span class="keyword">var</span> c=<span class="keyword">new</span> Complex(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(type(c));<span class="comment">//complex</span></div><div class="line">	<span class="keyword">var</span> Range=<span class="function"><span class="keyword">function</span> <span class="title">Range</span>(<span class="params">f,t</span>)</span>&#123;<span class="keyword">this</span>.from=f;<span class="keyword">this</span>.to=t;&#125;;</div><div class="line">	<span class="built_in">console</span>.log(type(Range));<span class="comment">//function</span></div><div class="line">	<span class="keyword">var</span> r=<span class="keyword">new</span> Range(<span class="number">1</span>,<span class="number">3</span>);</div><div class="line">	<span class="built_in">console</span>.log(type(r));<span class="comment">//Range</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/js/" rel="tag">#js</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/28/4/" rel="next" title="Create a remote docker container & Enable it's SSH access">
                <i class="fa fa-chevron-left"></i> Create a remote docker container & Enable it's SSH access
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Kang Gao" />
          <p class="site-author-name" itemprop="name">Kang Gao</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shgaokang" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/67140762/" target="_blank" title="Douban">
                  
                  Douban
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.sharpexcel.com" title="Sharp Excel" target="_blank">Sharp Excel</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://104.238.150.29/works/" title="Works" target="_blank">Works</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.douban.com/doulist/40599101/" title="Booklist" target="_blank">Booklist</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">This post does not have a Table of Contents</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kang Gao</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  

</body>
</html>
